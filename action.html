<html>

<head>
    <script src="/socket.io/socket.io.js"></script>
    <link rel="stylesheet" href="styles/style.css">
</head>

<body>
    <div class="header">
        <a href="New.html" class="btn">project</a>
        <a href="action.html" class="btn">Cash in /Cash out</a>
        <a href="statment.html" class="btn">Statment</a>
    </div>
    <div id="content">
        <h1>select a project</h1>
        <div id="choice"></div>
        <br>
        <button id="Submit">Submit</button>
    </div>

    <div id="btns" style="display: none;">
        <button id="add">Add action</button>
        <button id="edit">Edit action</button>
        <button id="Delete">Delete action</button>
    </div>
    <h2 id="project"></h2>
    <div id="cashin/out" style="display: none; flex-direction: column; width: 100%; align-items: center;">
        
        <div id="container2" >

            <div style="display: flex; flex-direction:column; align-items: center;">
                <h1>Cash in</h1>
                <div id="container">
                    <label for="">Abaa cash in</label>
                    <input type="number" name="" id="rentMoney" placeholder="Enter the amount cash in">
                </div>
                <br>
                <div id="container">
                    <label for="">Umi cash in</label>
                    <input type="number" name="" id="rentMoney" placeholder="Enter the amount cash in">
                </div>
                <br>
                <input type="submit" name="" id="CashInSubmit">

            </div>
            <div style="display: flex; flex-direction:column; align-items: center;">
                <h1>Cash out</h1>
                <div id="container">
                    <label for="">Rent money</label>
                    <input type="number" name="" id="rentMoney" placeholder="Enter the amount of rent">
                </div>
                <br>
                <div id="container">
                    <label for="">Cash money</label>
                    <input type="number" name="" id="CashMoney" placeholder="Enter the amount of Cash">
                </div>
                <br>
                <div id="container">
                    <label for="">Withdraw money</label>
                    <input type="number" name="" id="CashMoney" placeholder="Enter the amount of Cash">

                </div>
                <br>
                <div id="container">
                    <label for="">For who</label>
                    <div id="choice2"></div>

                </div>
                <br>
                <div id="container">
                    <label for="">Cash out date</label>
                    <input type="date">

                </div>
                <br>
                <input type="submit" name="" id="CashOutSubmit">
            </div>
            
        </div>
        <h3>submit together</h1>
        <input type="submit" name="" id="together">
    </div>
    <script>
        const socket = io()
        let username = "";
        const storedUsername = localStorage.getItem("username");
        if (storedUsername !== null) {
            username = storedUsername;
        }
        socket.emit("checkuser", username)

        socket.on("goLogin", (path) => {
            //locate the user to the path
            window.location = `./${path}`;
        })

        socket.emit("getProjects");
        socket.on("sendProjects", (projects) => {
            project = projects;
            console.log('sending projects');
            let selectElement = document.createElement("select");
            selectElement.setAttribute("id", "projectSelect");

            for (let i = 0; i < projects.length; i++) {
                let optionElement = document.createElement("option");
                optionElement.textContent = projects[i].project;
                selectElement.appendChild(optionElement);
            }

            let choiceDiv = document.getElementById("choice");
            choiceDiv.innerHTML = "";
            choiceDiv.appendChild(selectElement);
        });


        document.getElementById("Submit").addEventListener("click", () => {
            document.getElementById("btns").style.display = "block"
            //get the name from the select project
            let selectElement = document.getElementById("projectSelect");
            let selectedProject = selectElement.value;
            document.getElementById("project").innerHTML = selectedProject + " Project"
        })

        document.getElementById("add").addEventListener("click", () => {
            document.getElementById("cashin/out").style.display = "flex"
            
        })
        document.getElementById("edit").addEventListener("click", () => {
            document.getElementById("cashin/out").style.display = "none"
        })
        document.getElementById("delete").addEventListener("click", () => {
            document.getElementById("cashin/out").style.display = "none"
        })
    </script>
</body>

</html>